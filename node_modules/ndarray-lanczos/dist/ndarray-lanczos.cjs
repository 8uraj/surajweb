function t(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var r,a=/*#__PURE__*/t(require("ndarray")),e=function(t,r){if(t<=-r||t>=r)return 0;if(t>-1.1920929e-7&&t<1.1920929e-7)return 1;var a=t*Math.PI;return Math.sin(a)/a*Math.sin(a/r)/(a/r)},n=function(t,r,a,n,o,u,s,h){for(var i=Math.pow(2,h)-1,f=function(t){return Math.round(t*i)},c=o?2:3,p=1/a,l=Math.min(1,a),d=c/l,v=new s((Math.floor(2*(d+1))+2)*r),M=0,y=0;y<r;y++){for(var _=(y+.5)*p+n,w=Math.max(0,Math.floor(_-d)),A=Math.min(t-1,Math.ceil(_+d)),E=A-w+1,g=new u(E),L=new s(E),N=0,S=0,C=w;C<=A;C++){var O=e((C+.5-_)*l,c);N+=O,g[S]=O,S++}for(var Z=0,m=0;m<g.length;m++){var T=g[m]/N;Z+=T,L[m]=f(T)}L[r>>1]+=f(1-Z);for(var b=0;b<L.length&&0===L[b];)b++;for(var x=L.length-1;x>0&&0===L[x];)x--;var I=x-b+1;v[M++]=w+b,v[M++]=I,v.set(L.subarray(b,x+1),M),M+=I}return v},o=function(t,r,a,e){for(var n=t.shape[1],o=r.shape[0],u=Math.pow(2,8*r.data.BYTES_PER_ELEMENT)-1,s=function(t){return t<0?0:t>u?u:t},h=Math.pow(2,e-1),i=2*h,f=0;f<n;f++)for(var c=f,p=0,l=0;l<o;l++){for(var d=a[p++],v=0,M=0,y=0,_=0,w=a[p++];w>0;w--){var A=a[p++];v+=A*t.get(d,f,0),M+=A*t.get(d,f,1),y+=A*t.get(d,f,2),_+=A*t.get(d,f,3),d++}r.set(l,c,0,s((v+h)/i)),r.set(l,c,1,s((M+h)/i)),r.set(l,c,2,s((y+h)/i)),r.set(l,c,3,s((_+h)/i))}};function u(t,e,u){if(3!==t.shape.length||3!==e.shape.length)throw new TypeError("Input and output must have exactly 3 dimensions (width, height and colorspace)");var s,h,i=t.shape,f=i[0],c=i[1],p=e.shape,l=p[0],d=p[1],v=l/f,M=d/c;switch(e.dtype){case"uint8_clamped":case"uint8":s=Float32Array,h=Int16Array;break;case"uint16":case"uint32":s=Float64Array,h=Int32Array;break;default:throw TypeError("Unsupported data type "+e.dtype)}var y=7*h.BYTES_PER_ELEMENT,_=n(f,l,v,0,u===r.LANCZOS_2,s,h,y),w=n(c,d,M,0,u===r.LANCZOS_2,s,h,y),A=a.default(new(0,e.data.constructor)(l*c*4),[c,l,4]),E=A.transpose(1,0),g=e.transpose(1,0);o(t,E,_,y),o(A,g,w,y)}!function(t){t[t.LANCZOS_3=3]="LANCZOS_3",t[t.LANCZOS_2=2]="LANCZOS_2"}(r||(r={})),exports.lanczos2=function(t,a){u(t,a,r.LANCZOS_2)},exports.lanczos3=function(t,a){u(t,a,r.LANCZOS_3)};
//# sourceMappingURL=ndarray-lanczos.cjs.map
